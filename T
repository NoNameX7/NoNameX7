from transformers import GPT2Tokenizer, GPT2LMHeadModel

model_path = "./distilgpt2-local"

# Cek apakah model sudah diunduh
try:
    tokenizer = GPT2Tokenizer.from_pretrained(model_path)
    model = GPT2LMHeadModel.from_pretrained(model_path)
except:
    # Jika belum, unduh dan simpan
    tokenizer = GPT2Tokenizer.from_pretrained('distilgpt2')
    model = GPT2LMHeadModel.from_pretrained('distilgpt2')
    tokenizer.save_pretrained(model_path)
    model.save_pretrained(model_path)

chatbot = pipeline('text-generation', model=model, tokenizer=tokenizer)